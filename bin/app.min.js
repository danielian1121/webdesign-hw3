!function(e){var t={};function r(n){if(t[n])return t[n].exports;var s=t[n]={i:n,l:!1,exports:{}};return e[n].call(s.exports,s,s.exports,r),s.l=!0,s.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)r.d(n,s,function(t){return e[t]}.bind(null,s));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=3)}([function(e,t){e.exports=require("fs")},function(e,t){e.exports=require("express")},function(e,t){e.exports=require("body-parser")},function(e,t,r){r(4),e.exports=r(5)},function(e,t){e.exports=require("babel-polyfill")},function(e,t,r){"use strict";r.r(t);var n=r(1),s=r.n(n),u=r(2),a=r.n(u),o=r(0);function i(e,t,r,n,s,u,a){try{var o=e[u](a),i=o.value}catch(e){return void r(e)}o.done?t(i):Promise.resolve(i).then(n,s)}function c(e){return function(){var t=this,r=arguments;return new Promise(function(n,s){var u=e.apply(t,r);function a(e){i(u,n,s,a,o,"next",e)}function o(e){i(u,n,s,a,o,"throw",e)}a(void 0)})}}var l=s.a.Router(),f="".concat("/home/sukamo/webdesign/hw3","/data/student.json");l.get("/students$",function(){var e=c(regeneratorRuntime.mark(function e(t,r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.t0=r,e.t1=JSON,e.next=5,o.promises.readFile(f);case 5:e.t2=e.sent,e.t3=e.t1.parse.call(e.t1,e.t2),e.t0.send.call(e.t0,e.t3),e.next=13;break;case 10:e.prev=10,e.t4=e.catch(0),r.status(500).send({error:"Something failed!"});case 13:case"end":return e.stop()}},e,null,[[0,10]])}));return function(t,r){return e.apply(this,arguments)}}()),l.get("/students/:numberId",function(){var e=c(regeneratorRuntime.mark(function e(t,r){var n,s,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.params.numberId,e.prev=1,e.t0=JSON,e.next=5,o.promises.readFile(f);case 5:e.t1=e.sent,s=e.t0.parse.call(e.t0,e.t1),(u=s.student.filter(function(e){return e.ID===n})).length?r.send(u[0]):r.status(404).send("Not find."),e.next=14;break;case 11:e.prev=11,e.t2=e.catch(1),r.status(500).send({error:"Something failed!"});case 14:case"end":return e.stop()}},e,null,[[1,11]])}));return function(t,r){return e.apply(this,arguments)}}()),l.post("/students$",function(){var e=c(regeneratorRuntime.mark(function e(t,r){var n,s,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=t.body.ID,s=t.body.name,e.t0=JSON,e.next=6,o.promises.readFile(f);case 6:return e.t1=e.sent,(u=e.t0.parse.call(e.t0,e.t1)).student.push({ID:n,name:s}),e.next=11,o.promises.writeFile(f,JSON.stringify(u));case 11:r.status(200).send({message:"Create successfully"}),e.next=17;break;case 14:e.prev=14,e.t2=e.catch(0),r.status(500).send({error:"Something failed!"});case 17:case"end":return e.stop()}},e,null,[[0,14]])}));return function(t,r){return e.apply(this,arguments)}}()),l.delete("/students$",function(){var e=c(regeneratorRuntime.mark(function e(t,r){var n,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=t.body.ID,e.t0=JSON,e.next=5,o.promises.readFile(f);case 5:return e.t1=e.sent,(s=e.t0.parse.call(e.t0,e.t1)).student=s.student.filter(function(e){return e.ID!==n}),e.next=10,o.promises.writeFile(f,JSON.stringify(s));case 10:r.status(200).send({message:"Delete successfully"}),e.next=16;break;case 13:e.prev=13,e.t2=e.catch(0),r.status(500).send({error:"Something failed!"});case 16:case"end":return e.stop()}},e,null,[[0,13]])}));return function(t,r){return e.apply(this,arguments)}}());var d=l,p=s()();p.use(a.a.json()),p.use(a.a.urlencoded({extended:!0})),p.use(s.a.static("static/dist")),p.use("/api",d),p.get("/",function(e,t){t.sendFile("static/dist/html/home/index.html",{root:"/home/sukamo/webdesign/hw3"})}),p.listen(3e3)}]);